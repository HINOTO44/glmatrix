if(typeof WebGLFloatArray!='undefined'){glMatrixArrayType=WebGLFloatArray}else{glMatrixArrayType=Array}var vec3={};vec3.create=function(a){var b=new glMatrixArrayType(3);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2]}return b};vec3.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};vec3.add=function(a,b,c){if(!c||a==c){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2];return a}c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};vec3.subtract=function(a,b,c){if(!c||a==c){a[0]-=b[0];a[1]-=b[1];a[2]-=b[2];return a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};vec3.negate=function(a,b){if(!b){b=a}b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};vec3.scale=function(a,b,c){if(!c||a==c){a[0]*=b;a[1]*=b;a[2]*=b;return a}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};vec3.normalize=function(a,b){if(!b){b=a}var x=a[0],y=a[1],z=a[2];var c=Math.sqrt(x*x+y*y+z*z);if(c==0){b[0]=0;b[1]=0;b[2]=0;return b}else if(c==1){b[0]=x;b[1]=y;b[2]=z;return b}var d=1/c;b[0]=x*d;b[1]=y*d;b[2]=z*d;return b};vec3.cross=function(a,b,c){if(!c){c=a}var x=a[0],y=a[1],z=a[2];var d=a[0],y2=a[1],z2=a[2];c[0]=y*z2-z*y2;c[1]=z*d-x*z2;c[2]=x*y2-y*d;return c};vec3.length=function(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)};vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};var mat3={};mat3.create=function(a){var b=new glMatrixArrayType(9);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9]}return b};mat3.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};var mat4={};mat4.create=function(a){var b=new glMatrixArrayType(16);if(a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15]}return b};mat4.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};mat4.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};mat4.transpose=function(a,b){if(!b||a==b){var c=a[1],a02=a[2],a03=a[3];var d=a[6],a13=a[7];var e=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=a02;a[9]=d;a[11]=a[14];a[12]=a03;a[13]=a13;a[14]=e;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};mat4.determinant=function(a){var b=a[0],a01=a[1],a02=a[2],a03=a[3];var c=a[4],a11=a[5],a12=a[6],a13=a[7];var d=a[8],a21=a[9],a22=a[10],a23=a[11];var e=a[12],a31=a[13],a32=a[14],a33=a[15];return e*a21*a12*a03-d*a31*a12*a03-e*a11*a22*a03+c*a31*a22*a03+d*a11*a32*a03-c*a21*a32*a03-e*a21*a02*a13+d*a31*a02*a13+e*a01*a22*a13-b*a31*a22*a13-d*a01*a32*a13+b*a21*a32*a13+e*a11*a02*a23-c*a31*a02*a23-e*a01*a12*a23+b*a31*a12*a23+c*a01*a32*a23-b*a11*a32*a23-d*a11*a02*a33+c*a21*a02*a33+d*a01*a12*a33-b*a21*a12*a33-c*a01*a22*a33+b*a11*a22*a33};mat4.inverse=function(a,b){if(!b){b=a}var c=a[0],a01=a[1],a02=a[2],a03=a[3];var e=a[4],a11=a[5],a12=a[6],a13=a[7];var f=a[8],a21=a[9],a22=a[10],a23=a[11];var g=a[12],a31=a[13],a32=a[14],a33=a[15];var h=c*a11-a01*e;var i=c*a12-a02*e;var j=c*a13-a03*e;var k=a01*a12-a02*a11;var l=a01*a13-a03*a11;var m=a02*a13-a03*a12;var n=f*a31-a21*g;var o=f*a32-a22*g;var p=f*a33-a23*g;var q=a21*a32-a22*a31;var r=a21*a33-a23*a31;var s=a22*a33-a23*a32;var d=h*s-i*r+j*q+k*p-l*o+m*n;var t=1/d;b[0]=(a11*s-a12*r+a13*q)*t;b[1]=(-a01*s+a02*r-a03*q)*t;b[2]=(a31*m-a32*l+a33*k)*t;b[3]=(-a21*m+a22*l-a23*k)*t;b[4]=(-e*s+a12*p-a13*o)*t;b[5]=(c*s-a02*p+a03*o)*t;b[6]=(-g*m+a32*j-a33*i)*t;b[7]=(f*m-a22*j+a23*i)*t;b[8]=(e*r-a11*p+a13*n)*t;b[9]=(-c*r+a01*p-a03*n)*t;b[10]=(g*l-a31*j+a33*h)*t;b[11]=(-f*l+a21*j-a23*h)*t;b[12]=(-e*q+a11*o-a12*n)*t;b[13]=(c*q-a01*o+a02*n)*t;b[14]=(-g*k+a31*i-a32*h)*t;b[15]=(f*k-a21*i+a22*h)*t;return b};mat4.inverse3x3=function(a,b){var c=a[0],a01=a[1],a02=a[2];var e=a[4],a11=a[5],a12=a[6];var f=a[8],a21=a[9],a22=a[10];var g=a22*a11-a12*a21;var h=-a22*e+a12*f;var i=a21*e-a11*f;var d=c*g+a01*h+a02*i;if(d==0){return null}var j=1/d;if(!b){b=mat3.create()}b[0]=g*j;b[1]=(-a22*a01+a02*a21)*j;b[2]=(a12*a01-a02*a11)*j;b[3]=h*j;b[4]=(a22*c-a02*f)*j;b[5]=(-a12*c+a02*e)*j;b[6]=i*j;b[7]=(-a21*c+a01*f)*j;b[8]=(a11*c-a01*e)*j;return b};mat4.multiply=function(a,b,c){if(!c){c=a}var d=a[0],a01=a[1],a02=a[2],a03=a[3];var e=a[4],a11=a[5],a12=a[6],a13=a[7];var f=a[8],a21=a[9],a22=a[10],a23=a[11];var g=a[12],a31=a[13],a32=a[14],a33=a[15];var h=b[0],b01=b[1],b02=b[2],b03=b[3];var i=b[4],b11=b[5],b12=b[6],b13=b[7];var j=b[8],b21=b[9],b22=b[10],b23=b[11];var k=b[12],b31=b[13],b32=b[14],b33=b[15];c[0]=h*d+b01*e+b02*f+b03*g;c[1]=h*a01+b01*a11+b02*a21+b03*a31;c[2]=h*a02+b01*a12+b02*a22+b03*a32;c[3]=h*a03+b01*a13+b02*a23+b03*a33;c[4]=i*d+b11*e+b12*f+b13*g;c[5]=i*a01+b11*a11+b12*a21+b13*a31;c[6]=i*a02+b11*a12+b12*a22+b13*a32;c[7]=i*a03+b11*a13+b12*a23+b13*a33;c[8]=j*d+b21*e+b22*f+b23*g;c[9]=j*a01+b21*a11+b22*a21+b23*a31;c[10]=j*a02+b21*a12+b22*a22+b23*a32;c[11]=j*a03+b21*a13+b22*a23+b23*a33;c[12]=k*d+b31*e+b32*f+b33*g;c[13]=k*a01+b31*a11+b32*a21+b33*a31;c[14]=k*a02+b31*a12+b32*a22+b33*a32;c[15]=k*a03+b31*a13+b32*a23+b33*a33;return c};mat4.multiplyVec3=function(a,b,c){if(!c){c=b}var x=b[0],y=b[1],z=b[2];c[0]=a[0]*x+a[4]*y+a[8]*z+a[12];c[1]=a[1]*x+a[5]*y+a[9]*z+a[13];c[2]=a[2]*x+a[6]*y+a[10]*z+a[14];return c};mat4.multiplyVec4=function(a,b,c){if(!c){c=b}var x=b[0],y=b[1],z=b[2],w=b[3];c[0]=a[0]*x+a[4]*y+a[8]*z+a[12]*w;c[1]=a[1]*x+a[5]*y+a[9]*z+a[13]*w;c[2]=a[2]*x+a[6]*y+a[10]*z+a[14]*w;c[4]=a[4]*x+a[7]*y+a[11]*z+a[15]*w;return c};mat4.translate=function(a,b,c){var x=b[0],y=b[1],z=b[2];if(!c||a==c){a[12]=a[0]*x+a[4]*y+a[8]*z+a[12];a[13]=a[1]*x+a[5]*y+a[9]*z+a[13];a[14]=a[2]*x+a[6]*y+a[10]*z+a[14];a[15]=a[3]*x+a[7]*y+a[11]*z+a[15];return a}var d=a[0],a01=a[1],a02=a[2],a03=a[3];var e=a[4],a11=a[5],a12=a[6],a13=a[7];var f=a[8],a21=a[9],a22=a[10],a23=a[11];c[0]=d;c[1]=a01;c[2]=a02;c[3]=a03;c[4]=e;c[5]=a11;c[6]=a12;c[7]=a13;c[8]=f;c[9]=a21;c[10]=a22;c[11]=a23;c[12]=d*x+e*y+f*z+a[12];c[13]=a01*x+a11*y+a21*z+a[13];c[14]=a02*x+a12*y+a22*z+a[14];c[15]=a03*x+a13*y+a23*z+a[15];return c};mat4.scale=function(a,b,c){var x=b[0],y=b[1],z=b[2];if(!c||a==c){a[0]*=x;a[1]*=x;a[2]*=x;a[3]*=x;a[4]*=y;a[5]*=y;a[6]*=y;a[7]*=y;a[8]*=z;a[9]*=z;a[10]*=z;a[11]*=z;return a}c[0]=a[0]*x;c[1]=a[1]*x;c[2]=a[2]*x;c[3]=a[3]*x;c[4]=a[4]*y;c[5]=a[5]*y;c[6]=a[6]*y;c[7]=a[7]*y;c[8]=a[8]*z;c[9]=a[9]*z;c[10]=a[10]*z;c[11]=a[11]*z;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};mat4.rotate=function(a,b,d,e){var x=d[0],y=d[1],z=d[2];var f=Math.sqrt(x*x+y*y+z*z);if(f==0){return null}if(f!=1){var g=1/f;x*=g;y*=g;z*=g}var s=Math.sin(b);var c=Math.cos(b);var t=1-c;var h=a[0],a01=a[1],a02=a[2],a03=a[3];var i=a[4],a11=a[5],a12=a[6],a13=a[7];var j=a[8],a21=a[9],a22=a[10],a23=a[11];var k=x*x*t+c,b01=y*x*t+z*s,b02=z*x*t-y*s;var l=x*y*t-z*s,b11=y*y*t+c,b12=z*y*t+x*s;var m=x*z*t+y*s,b21=y*z*t-x*s,b22=z*z*t+c;if(!e){e=a}else if(a!=e){e[12]=a[12];e[13]=a[13];e[14]=a[14];e[15]=a[15]}e[0]=h*k+i*b01+j*b02;e[1]=a01*k+a11*b01+a21*b02;e[2]=a02*k+a12*b01+a22*b02;e[3]=a03*k+a13*b01+a23*b02;e[4]=h*l+i*b11+j*b12;e[5]=a01*l+a11*b11+a21*b12;e[6]=a02*l+a12*b11+a22*b12;e[7]=a03*l+a13*b11+a23*b12;e[8]=h*m+i*b21+j*b22;e[9]=a01*m+a11*b21+a21*b22;e[10]=a02*m+a12*b21+a22*b22;e[11]=a03*m+a13*b21+a23*b22;return e};mat4.rotateX=function(a,b,d){var s=Math.sin(b);var c=Math.cos(b);var e=a[4],a11=a[5],a12=a[6],a13=a[7];var f=a[8],a21=a[9],a22=a[10],a23=a[11];if(!d){d=a}else if(a!=d){d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=a[3];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15]}d[4]=e*c+f*s;d[5]=a11*c+a21*s;d[6]=a12*c+a22*s;d[7]=a13*c+a23*s;d[8]=e*-s+f*c;d[9]=a11*-s+a21*c;d[10]=a12*-s+a22*c;d[11]=a13*-s+a23*c;return d};mat4.rotateY=function(a,b,d){var s=Math.sin(b);var c=Math.cos(b);var e=a[0],a01=a[1],a02=a[2],a03=a[3];var f=a[8],a21=a[9],a22=a[10],a23=a[11];if(!d){d=a}else if(a!=d){d[4]=a[4];d[5]=a[5];d[6]=a[6];d[7]=a[7];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15]}d[0]=e*c+f*-s;d[1]=a01*c+a21*-s;d[2]=a02*c+a22*-s;d[3]=a03*c+a23*-s;d[8]=e*s+f*c;d[9]=a01*s+a21*c;d[10]=a02*s+a22*c;d[11]=a03*s+a23*c;return d};mat4.rotateZ=function(a,b,d){var s=Math.sin(b);var c=Math.cos(b);var e=a[0],a01=a[1],a02=a[2],a03=a[3];var f=a[4],a11=a[5],a12=a[6],a13=a[7];if(!d){d=a}else if(a!=d){d[8]=a[8];d[9]=a[9];d[10]=a[10];d[11]=a[11];d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15]}d[0]=e*c+f*s;d[1]=a01*c+a11*s;d[2]=a02*c+a12*s;d[3]=a03*c+a13*s;d[4]=e*-s+f*c;d[5]=a01*-s+a11*c;d[6]=a02*-s+a12*c;d[7]=a03*-s+a13*c;return d};mat4.frustum=function(a,b,c,d,e,f,g){g[0]=(2*e)/(b-a);g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*e/(d-c);g[6]=0;g[7]=0;g[8]=(b+a)/(b-a);g[9]=(d+c)/(d-c);g[10]=-(f+e)/(f-e);g[11]=-1;g[12]=0;g[13]=0;g[14]=-(2*f*e)/(f-e);g[15]=0;return g};mat4.perspective=function(a,b,c,d,e){var f=c*Math.tan(a*Math.PI/360.0);var g=f*b;return mat4.frustum(-g,g,-f,f,c,d,e)};mat4.ortho=function(a,b,c,d,e,f,g){g[0]=2/(a-b);g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/(d-c);g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/(f-e);g[11]=0;g[12]=(a+b)/(a-b);g[13]=(d+c)/(d-c);g[14]=(f+e)/(f-e);g[15]=1;return g};mat4.str=function(a){return'['+a.join(',')+']'};